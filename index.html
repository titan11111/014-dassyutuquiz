<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>謎の倉庫からの脱出</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- スタート画面 -->
    <div id="startScreen" class="screen active">
        <div class="start-content">
            <h1 class="title-glow">謎の倉庫からの脱出</h1>
            <p class="story-text">
                目が覚めると、そこは薄暗い倉庫だった...<br>
                「ここは...どこだろう？」<br>
                扉には鍵がかかっている。<br>
                クイズを解いて脱出しよう！
            </p>
            <button id="startBtn" class="btn-start">脱出開始</button>
            <div class="instructions">
                <p>📱 スマホでもプレイ可能</p>
                <p>🎯 全10問のクイズに挑戦</p>
                <p>🔓 正解で扉が開いていく</p>
            </div>
        </div>
    </div>

    <!-- ゲーム画面 -->
    <div id="gameScreen" class="screen">
        <div class="game-container">
            <!-- ステータスバー -->
            <div class="status-bar">
                <div class="progress-info">
                    <span class="stage-label">第 <span id="currentStage">1</span> 問</span>
                    <span class="total-label">/ 10問</span>
                </div>
                <div class="life-container">
                    <span class="life-label">ライフ:</span>
                    <div id="lifeHearts" class="hearts">
                        <span class="heart">❤️</span>
                        <span class="heart">❤️</span>
                        <span class="heart">❤️</span>
                    </div>
                </div>
            </div>

            <!-- 倉庫の背景効果 -->
            <div class="warehouse-bg">
                <!-- 脱出進行状況エリア（将来の画像用） -->
                <div class="escape-progress-area">
                    <div class="progress-text" id="progressText">暗い倉庫に閉じ込められている...</div>
                </div>
                
                <div class="door-container">
                    <div id="door" class="door">
                        <div class="door-lock" id="doorLock">🔒</div>
                        <div class="door-progress">
                            <div id="doorProgressBar" class="door-progress-bar"></div>
                        </div>
                    </div>
                    <div class="light-effect" id="lightEffect"></div>
                </div>
            </div>

            <!-- クイズエリア -->
            <div class="quiz-area">
                <div id="questionBox" class="question-box">
                    <p id="questionText" class="question-text"></p>
                </div>
                
                <div id="answersContainer" class="answers-container">
                    <!-- 選択肢ボタンが動的に生成される -->
                </div>

                <div id="feedbackMessage" class="feedback-message"></div>
            </div>

            <!-- エフェクト用 -->
            <div id="effectLayer" class="effect-layer"></div>
        </div>
    </div>

    <!-- ゲームオーバー画面 -->
    <div id="gameOverScreen" class="screen">
        <div class="gameover-content">
            <h2 class="gameover-title">脱出失敗...</h2>
            <p class="gameover-text">
                倉庫から脱出できませんでした...<br>
                もう一度挑戦しますか？
            </p>
            <div class="score-display">
                <p>正解数: <span id="finalCorrect">0</span> / 10問</p>
            </div>
            <button id="retryBtn" class="btn-retry">もう一度挑戦</button>
        </div>
    </div>

    <!-- クリア画面 -->
    <div id="clearScreen" class="screen">
        <div class="clear-content">
            <h2 class="clear-title">🎉 脱出成功！ 🎉</h2>
            <p class="clear-text">
                見事すべてのクイズを解いて<br>
                倉庫から脱出できました！
            </p>
            <div class="final-score">
                <p class="score-label">最終スコア</p>
                <p class="score-value">
                    正解数: <span id="clearCorrect">10</span> / 10問<br>
                    残りライフ: <span id="remainingLife">0</span>
                </p>
            </div>
            <div class="clear-buttons">
                <button id="restartBtn" class="btn-restart">もう一度プレイ</button>
            </div>
        </div>
        <div class="confetti-container" id="confettiContainer"></div>
    </div>

    <!-- BGMと音声エフェクト -->
    <audio id="bgmAudio" loop>
        <source src="audio/BGM.mp3" type="audio/mpeg">
        <source src="BGM.mp3" type="audio/mpeg">
    </audio>
    <audio id="correctSound"></audio>
    <audio id="wrongSound"></audio>
    <audio id="clearSound"></audio>
    <audio id="alarmSound"></audio>

    <!-- 音声コントロールボタン -->
    <button id="soundToggle" class="sound-toggle" title="BGM ON/OFF">
        <span class="sound-on">🔊</span>
        <span class="sound-off" style="display: none;">🔇</span>
    </button>

    <script src="script.js"></script>
</body>
</html>
